<!DOCTYPE html>

<html>
<head>
  <title>merchant.coffee</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="debug.html">
                debug.coffee
              </a>
            
              
              <a class="source" href="errors.html">
                errors.coffee
              </a>
            
              
              <a class="source" href="index.html">
                index.coffee
              </a>
            
              
              <a class="source" href="merchant.html">
                merchant.coffee
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>merchant.coffee</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>util = <span class="hljs-built_in">require</span> <span class="hljs-string">'util'</span>
url = <span class="hljs-built_in">require</span> <span class="hljs-string">'url'</span>
Promise = <span class="hljs-built_in">require</span> <span class="hljs-string">'bluebird'</span>
request = Promise.promisifyAll <span class="hljs-built_in">require</span> <span class="hljs-string">'request'</span>
errors = <span class="hljs-built_in">require</span> <span class="hljs-string">'./errors'</span>
debug = (<span class="hljs-built_in">require</span> <span class="hljs-string">'./debug'</span>) <span class="hljs-string">'merchant'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <hr>
<h1 id="merchant">Merchant</h1>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p><strong>Merchant</strong> use for invoke <a href="https://merchant.wish.com/documentation/api">Wish Merchant API</a>. For more infomation please visit <a href="https://merchant.wish.com">The Wish merchant platform</a>.</p>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-built_in">module</span>.exports = <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Merchant</span></span></pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h2 id="new">New</h2>

            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p><strong>Create a new instance</strong></p>
<p><code>new Merchant({ key, [sandbox], [timeout] })</code></p>
<p>Arguments</p>
<ol>
<li>options (Object)<ul>
<li>key: Api key of wish. Read <a href="https://merchant.wish.com/documentation/api#get-api-key">official document</a> for more info.</li>
<li>sandbox: If <code>true</code> will invoke sandbox api for test. Default <code>false</code>.</li>
<li>timeout: Milliseconds wait the respond of api. Default 20s <code>(20 * 1000)</code>.</li>
</ul>
</li>
</ol>
<p>Return a new instance.</p>
<p>Example</p>
<pre><code class="lang-coffee"><span class="hljs-reserved">var</span> api = <span class="hljs-keyword">new</span> Merchant({<span class="hljs-attribute">key</span>: <span class="hljs-string">'your api key here'</span>});
</code></pre>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">constructor</span>: <span class="hljs-function"><span class="hljs-params">(options)</span> -&gt;</span>
    { <span class="hljs-property">@key</span>, <span class="hljs-property">@sandbox</span>, <span class="hljs-property">@timeout</span> } = options <span class="hljs-keyword">or</span> {}
    <span class="hljs-property">@sandbox</span> ?= <span class="hljs-literal">false</span>
    <span class="hljs-property">@timeout</span> ?= <span class="hljs-number">20</span> * <span class="hljs-number">1000</span>

    <span class="hljs-property">@baseUrl</span> = <span class="hljs-keyword">if</span> <span class="hljs-property">@sandbox</span>
      <span class="hljs-string">'https://sandbox.merchant.wish.com/api/v1'</span>
    <span class="hljs-keyword">else</span>
      <span class="hljs-string">'https://merchant.wish.com/api/v1'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Format json result to flatten javascript object.</p>
<p>Example</p>
<pre>
Before
{ success: <del>'True'</del> }
After
{ success: true }
</pre>

<pre>
Before
{
  <del>Product: {</del>
    name: 'Fancy toy',
    tags: [{
      <del>Tag: {</del> id: 'toy', name: 'toy' <del>}</del>
    }]
    variants: [{
      <del>Variant: {</del> price: <del>'10.5'</del>, enable: <del>'True' }</del>
    }]
  <del>}</del>
}
After
{
  name: 'Fancy toy'
  tags: [{ id: 'toy', name: 'toy' }]
  variants: [{ price: 10.5, enable: true }]
}
</pre>

<p><pre>
Before
{
  <del>Order: {</del>
    <del>ShippingDetail: {</del> country: ‘US’ <del>}</del>,
    order_time: <del>‘2013-12-06T20:20:20’</del>
  <del>}</del>
}
After
{
  country: ‘US’,
  order_time: new Date(…)
}
</pre></p>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">format</span>: <span class="hljs-function"><span class="hljs-params">(json)</span> -&gt;</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">typeof</span> json.success <span class="hljs-keyword">is</span> <span class="hljs-string">'string'</span>
      json.success = json.success <span class="hljs-keyword">is</span> <span class="hljs-string">'True'</span>
      <span class="hljs-keyword">return</span> json
      
    <span class="hljs-keyword">if</span> util.isArray json
      <span class="hljs-keyword">return</span> json.map <span class="hljs-function"><span class="hljs-params">(item)</span> =&gt;</span> <span class="hljs-property">@format</span> item
    
    <span class="hljs-keyword">if</span> json.Product
      json = json.Product
      json.is_promoted = json.is_promoted <span class="hljs-keyword">is</span> <span class="hljs-string">'True'</span> <span class="hljs-keyword">if</span> json.is_promoted
      [ <span class="hljs-string">'number_saves'</span>, <span class="hljs-string">'number_sold'</span> ].map <span class="hljs-function"><span class="hljs-params">(key)</span> -&gt;</span>
        json[key] = Number json[key] <span class="hljs-keyword">if</span> json[key]
    
    <span class="hljs-keyword">if</span> json.Variant
      json = json.Variant
      json.enabled = json.enabled <span class="hljs-keyword">is</span> <span class="hljs-string">'True'</span> <span class="hljs-keyword">if</span> json.enabled
      [ <span class="hljs-string">'msrp'</span>, <span class="hljs-string">'inventory'</span>, <span class="hljs-string">'price'</span>, <span class="hljs-string">'shipping'</span> ].map <span class="hljs-function"><span class="hljs-params">(key)</span> -&gt;</span>
        json[key] = Number json[key] <span class="hljs-keyword">if</span> json[key]
    
    <span class="hljs-keyword">if</span> json.Order
      json = json.Order
      <span class="hljs-keyword">if</span> json.ShippingDetail
        json[key] = value <span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">of</span> json.ShippingDetail
        <span class="hljs-keyword">delete</span> json.ShippingDetail
      [ <span class="hljs-string">'order_total'</span>, <span class="hljs-string">'quantity'</span>, <span class="hljs-string">'price'</span>, <span class="hljs-string">'cost'</span>,
        <span class="hljs-string">'shipping'</span>, <span class="hljs-string">'shipping_cost'</span>, <span class="hljs-string">'days_to_fulfill'</span> ].map <span class="hljs-function"><span class="hljs-params">(key)</span> -&gt;</span>
        json[key] = Number json[key] <span class="hljs-keyword">if</span> json[key]
      [ <span class="hljs-string">'last_updated'</span>, <span class="hljs-string">'order_time'</span> ].map <span class="hljs-function"><span class="hljs-params">(key)</span> -&gt;</span>
        json[key] = <span class="hljs-keyword">new</span> Date json[key] <span class="hljs-keyword">if</span> json[key]
    
    json = json.Tag <span class="hljs-keyword">or</span> json
    
    <span class="hljs-keyword">if</span> json.tags
      json.tags = <span class="hljs-property">@format</span> json.tags
    
    <span class="hljs-keyword">if</span> json.auto_tags
      json.auto_tags = <span class="hljs-property">@format</span> json.auto_tags
      
    <span class="hljs-keyword">if</span> json.variants
      json.variants = <span class="hljs-property">@format</span> json.variants
    
    json</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Append path and query to base url.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">url</span>: <span class="hljs-function"><span class="hljs-params">(path, query)</span> -&gt;</span>
    uri = url.parse <span class="hljs-property">@baseUrl</span>
    uri.pathname += path
    uri.path = <span class="hljs-string">''</span>
    uri.query ?= {}
    uri.query[key] = value <span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">of</span> query
    url.format uri</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Handle request. catch error.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">handle</span>: <span class="hljs-function"><span class="hljs-params">(promise)</span> -&gt;</span>
    promise
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">([ res, body ])</span> -&gt;</span>
        debug body
      
        { code } = body
      
        <span class="hljs-keyword">if</span> code <span class="hljs-keyword">is</span> <span class="hljs-number">0</span>
          body
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> code
          <span class="hljs-keyword">throw</span> errors.wish body
        <span class="hljs-keyword">else</span>
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> errors.ServerError <span class="hljs-attribute">response</span>: body</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Request GET.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">get</span>: <span class="hljs-function"><span class="hljs-params">(path, query = {})</span> -&gt;</span>
    <span class="hljs-keyword">return</span> Promise.reject <span class="hljs-keyword">new</span> errors.ParamMissingError <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-property">@key</span>
    
    query.key = <span class="hljs-property">@key</span>
    uri = <span class="hljs-property">@url</span> path, query
    
    debug <span class="hljs-string">'GET'</span>, uri
    
    <span class="hljs-property">@handle</span> request.getAsync uri,
      <span class="hljs-attribute">json</span>:    <span class="hljs-literal">true</span>
      <span class="hljs-attribute">timeout</span>: <span class="hljs-property">@timeout</span></pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Request POST</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">post</span>: <span class="hljs-function"><span class="hljs-params">(path, form = {})</span> -&gt;</span>
    <span class="hljs-keyword">return</span> Promise.reject <span class="hljs-keyword">new</span> errors.ParamMissingError <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-property">@key</span>
    
    uri = <span class="hljs-property">@url</span> path
    form.key = <span class="hljs-property">@key</span>
    
    debug <span class="hljs-string">'POST'</span>, uri, form
    
    <span class="hljs-property">@handle</span> request.postAsync uri,
      <span class="hljs-attribute">json</span>:    <span class="hljs-literal">true</span>
      <span class="hljs-attribute">timeout</span>: <span class="hljs-property">@timeout</span>
      <span class="hljs-attribute">form</span>:    form</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <h2 id="authentication">Authentication</h2>

            </div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p><code>authTest( [callback] )</code></p>
<p>Test if api key is valid.</p>
<p>return <code>{success: true}</code> if success. otherwise error.</p>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">authTest</span>: <span class="hljs-function"><span class="hljs-params">(callback)</span> -&gt;</span>
    <span class="hljs-property">@authTestJSON</span>()
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">(json)</span> =&gt;</span> <span class="hljs-property">@format</span> json.data
      .nodeify callback
  
  <span class="hljs-attribute">authTestJSON</span>: <span class="hljs-function"><span class="hljs-params">(callback)</span> -&gt;</span>
    <span class="hljs-property">@get</span> <span class="hljs-string">'/auth_test'</span>
      .nodeify callback</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <h2 id="product">Product</h2>

            </div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p><code>product( id, [callback] )</code></p>
<p>Retrieve the details about a product which exists on the Wish platform.</p>
<p>Arguments</p>
<ol>
<li>id (string): The unique wish identifier for this product</li>
<li>callback (function): err, result.</li>
</ol>
<p>Return product data.</p>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">product</span>: <span class="hljs-function"><span class="hljs-params">(id, callback)</span> -&gt;</span>
    <span class="hljs-property">@productJSON</span> id
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">(json)</span> =&gt;</span> <span class="hljs-property">@format</span> json.data
      .nodeify callback
  
  <span class="hljs-attribute">productJSON</span>: <span class="hljs-function"><span class="hljs-params">(id, callback)</span> -&gt;</span>
    id = id.id <span class="hljs-keyword">if</span> id.id
    <span class="hljs-property">@get</span> <span class="hljs-string">'/product'</span>, <span class="hljs-attribute">id</span>: id
      .nodeify callback</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p><code>products( [start], [limit], [callback] )</code></p>
<p>List all Products</p>
<p>Arguments</p>
<ol>
<li>start: <em>optional</em> An offset into the list of returned items. Use 0 to start at the beginning. The API will return the requested number of items starting at this offset. Default to 0 if not supplied.</li>
<li>limit: <em>optional</em> A limit on the number of products that can be returned. Limit can range from 1 to 500 items and the default is 50</li>
<li>callback: err, products.</li>
</ol>
<p>Return an products array.</p>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">products</span>: <span class="hljs-function"><span class="hljs-params">(start, limit, callback)</span> -&gt;</span>
    <span class="hljs-property">@productsJSON</span> start, limit
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">(json)</span> =&gt;</span> <span class="hljs-property">@format</span> json.data
      .nodeify callback
  
  <span class="hljs-attribute">productsJSON</span>: <span class="hljs-function"><span class="hljs-params">(start = <span class="hljs-number">0</span>, limit = <span class="hljs-number">50</span>, callback)</span> -&gt;</span>
    <span class="hljs-property">@get</span> <span class="hljs-string">'/product/multi-get'</span>,
      <span class="hljs-attribute">start</span>: start
      <span class="hljs-attribute">limit</span>: limit
    .nodeify callback</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p><code>createProduct( product, [callback] )</code></p>
<p>Create a Product</p>
<p>Arguments</p>
<ol>
<li>product<ul>
<li>name: Name of the product as shown to users on Wish</li>
<li>description: Description of the product. Should not contain HTML. If you want a new line use “\n”.</li>
<li>tags: Comma separated list of strings that describe the product. Only 10 are allowed. Any tags past 10 will be ignored.</li>
<li>sku: The unique identifier that your system uses to recognize this product</li>
<li>color: <em>optional</em> The color of the product. Example: red, blue, green</li>
<li>size: <em>optional</em> The size of the product. Example: Large, Medium, Small, 5, 6, 7.5</li>
<li>inventory: The physical quantities you have for this product</li>
<li>price: The price of the product when the user purchases one</li>
<li>shipping: The shipping of the product when the user purchases one</li>
<li>msrp: <em>optional</em> Manufacturer’s Suggested Retail Price. This field is recommended as it will show as a strikethrough price on Wish and appears above the selling price for the product.</li>
<li>shipping_time: <em>optional</em> The amount of time it takes for the shipment to reach the buyer. Please also factor in the time it will take to fulfill and ship the item. Provide a time range in number of days. Lower bound cannot be less than 2 days. Example: 15-20</li>
<li>main_image: URL of a photo of your product. Link directly to the image, not the page where it is located. We accept JPEG, PNG or GIF format. Images should be at least 100 x 100 pixels in size.</li>
<li>parent_sku: <em>optional</em> When defining a variant of a product we must know which product to attach the variation to. parent_sku is the unique id of the product that you can use later when using the add product variation API.</li>
<li>brand: <em>optional</em> Brand or manufacturer of your product</li>
<li>landing_page_url: <em>optional</em> URL on your website containing the product details</li>
<li>upc: <em>optional</em> 12-digit Universal Product Codes (UPC)-contains no letters or other characters</li>
<li>extra_images: <em>optional</em> URL of extra photos of your product. Link directly to the image, not the page where it is located. Same rules apply as main_image. You can specify one or more additional images separated by the character ‘|’</li>
</ul>
</li>
<li>callback: err, product.</li>
</ol>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">createProduct</span>: <span class="hljs-function"><span class="hljs-params">(product, callback)</span> -&gt;</span>
    <span class="hljs-property">@createProductJSON</span> product
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">(json)</span> =&gt;</span> <span class="hljs-property">@format</span> json.data
      .nodeify callback
  
  <span class="hljs-attribute">createProductJSON</span>: <span class="hljs-function"><span class="hljs-params">(product, callback)</span> -&gt;</span>
    <span class="hljs-property">@post</span> <span class="hljs-string">'/product/add'</span>, product
    .nodeify(callback)</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p><code>updateProduct( product, [callback] )</code></p>
<p>Update a Product</p>
<p>Arguments</p>
<ol>
<li>product<ul>
<li>id: Must provide either id or parent_sku Wish’s unique identifier for the product you would like to update</li>
<li>parent_sku: Must provide either id or parent_sku The parent sku for the product you would like to update</li>
<li>name: <em>optional</em> Name of the product as shown to users</li>
<li>description: <em>optional</em> Description of the product. If you want a new line use “\n”.</li>
<li>tags: <em>optional</em> Comma separated list of strings. The tags passed into this parameter will completely replace the tags that are currently on the product</li>
<li>brand: <em>optional</em> Brand or manufacturer of your product</li>
<li>landing_page_url: <em>optional</em> URL on your website containing the product detail and buy button for the applicable product.</li>
<li>upc: <em>optional</em> 12-digit Universal Product Codes (UPC)-contains no letters or other characters</li>
<li>main_image: <em>optional</em> URL of a photo of your product. Link directly to the image, not the page where it is located. We accept JPEG, PNG or GIF format. Images should be at least 100 x 100 pixels in size.</li>
<li>extra_images: <em>optional</em> URL of a photo of your product. Link directly to the image, not the page where it is located. Same rules apply as main_image. You can specify one or more additional images separated by the character ‘|’</li>
</ul>
</li>
<li>callback: err, null</li>
</ol>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">updateProduct</span>: <span class="hljs-function"><span class="hljs-params">(product, callback)</span> -&gt;</span>
    <span class="hljs-property">@updateProductJSON</span> product
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">(json)</span> =&gt;</span> json.data
      .nodeify callback
  
  <span class="hljs-attribute">updateProductJSON</span>: <span class="hljs-function"><span class="hljs-params">(product, callback)</span> -&gt;</span>
    <span class="hljs-property">@post</span> <span class="hljs-string">'/product/update'</span>, product
    .nodeify(callback)</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>enableProduct( {id/parent_sku}, [callback] )`</p>
<p>Enable a Product</p>
<p>Arguments</p>
<ol>
<li>object<ul>
<li>id: Must provide either id or parent_sku Wish’s unique identifier for the product you would like to update</li>
<li>parent_sku: Must provide either id or parent_sku The parent sku for the product you would like to update</li>
</ul>
</li>
<li>callback: err, {}</li>
</ol>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">enableProduct</span>: <span class="hljs-function"><span class="hljs-params">(args, callback)</span> -&gt;</span>
    <span class="hljs-property">@enableProductJSON</span> args
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">(json)</span> =&gt;</span> json.data
      .nodeify callback
  
  <span class="hljs-attribute">enableProductJSON</span>: <span class="hljs-function"><span class="hljs-params">(args, callback)</span> -&gt;</span>
    <span class="hljs-property">@post</span> <span class="hljs-string">'/product/enable'</span>, args
    .nodeify(callback)</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p><code>disableProduct( {id/parent_sku}, [callback] )</code></p>
<p>Disable a Product</p>
<p>Arguments same as <code>enableProduct</code></p>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">disableProduct</span>: <span class="hljs-function"><span class="hljs-params">(args, callback)</span> -&gt;</span>
    <span class="hljs-property">@disableProductJSON</span> args
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">(json)</span> =&gt;</span> json.data
      .nodeify callback
  
  <span class="hljs-attribute">disableProductJSON</span>: <span class="hljs-function"><span class="hljs-params">(args, callback)</span> -&gt;</span>
    <span class="hljs-property">@post</span> <span class="hljs-string">'/product/disable'</span>, args
    .nodeify(callback)</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <h2 id="variation">Variation</h2>

            </div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p><code>variant( sku, [callback] )</code></p>
<p>Retrieves the details of an existing product variation.</p>
<p>Be careful: SKU is case sensitive.</p>
<p>Arguments</p>
<ol>
<li>sku</li>
<li>callback: err, variant</li>
</ol>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">variant</span>: <span class="hljs-function"><span class="hljs-params">(sku, callback)</span> -&gt;</span>
    <span class="hljs-property">@variantJSON</span> sku
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">(json)</span> =&gt;</span> <span class="hljs-property">@format</span> json.data
      .nodeify callback
  
  <span class="hljs-attribute">variantJSON</span>: <span class="hljs-function"><span class="hljs-params">(sku, callback)</span> -&gt;</span>
    <span class="hljs-property">@get</span> <span class="hljs-string">'/variant'</span>, <span class="hljs-attribute">sku</span>: sku
      .nodeify callback</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p><code>variants( [start], [limit], [callback] )</code></p>
<p>List all Product Variations</p>
<p>Be careful: The limit is product count limit. Not variants limit.</p>
<p>Arguments</p>
<ol>
<li>start: <em>optional</em> An offset into the list of returned items. Use 0 to start at the beginning. The API will return the requested number of items starting at this offset. Default to 0 if not supplied</li>
<li>limit: A limit on the number of products that can be returned. Limit can range from 1 to 500 items and the default is 50</li>
<li>callback: err, variants</li>
</ol>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">variants</span>: <span class="hljs-function"><span class="hljs-params">(start, limit, callback)</span> -&gt;</span>
    <span class="hljs-property">@variantsJSON</span> start, limit
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">(json)</span> =&gt;</span> <span class="hljs-property">@format</span> json.data
      .nodeify callback
  
  <span class="hljs-attribute">variantsJSON</span>: <span class="hljs-function"><span class="hljs-params">(start = <span class="hljs-number">0</span>, limit = <span class="hljs-number">50</span>, callback)</span> -&gt;</span>
    <span class="hljs-property">@get</span> <span class="hljs-string">'/variant/multi-get'</span>,
      <span class="hljs-attribute">start</span>: start
      <span class="hljs-attribute">limit</span>: limit
    .nodeify callback</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p><code>createVariant( variant, [callback] )</code></p>
<p>Create a Product Variation</p>
<p>Arguments</p>
<ol>
<li>variant<ul>
<li>parent_sku: The parent_sku of the product this new product variation should be added to. If the product is missing a parent_sku, then this should be the SKU of a product variation of the product</li>
<li>sku: The unique identifier that your system uses to recognize this variation</li>
<li>color: <em>optional</em> The color of the variation. Example: red, blue, green</li>
<li>size: <em>optional</em> The size of the variation. Example: Large, Medium, Small, 5, 6, 7.5</li>
<li>inventory: The physical quantities you have for this variation</li>
<li>price: The price of the variation when the user purchases one</li>
<li>shipping: The shipping of the variation when the user purchases one</li>
<li>msrp: <em>optional</em> Manufacturer’s Suggested Retail Price. This field is recommended as it will show as a strikethrough price on Wish and appears above the selling price for the variation.</li>
<li>shipping_time: <em>optional</em> The amount of time it takes for the shipment to reach the buyer. Please also factor in the time it will take to fulfill and ship the item. Provide a time range in number of days. Lower bound cannot be less than 2 days. Example: 15-20</li>
<li>main_image: URL of a photo of your product. Link directly to the image, not the page where it is located. We accept JPEG, PNG or GIF format. Images should be at least 100 x 100 pixels in size.</li>
</ul>
</li>
<li>callback: err, variant</li>
</ol>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">createVariant</span>: <span class="hljs-function"><span class="hljs-params">(variant, callback)</span> -&gt;</span>
    <span class="hljs-property">@createVariantJSON</span> variant
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">(json)</span> =&gt;</span> <span class="hljs-property">@format</span> json.data
      .nodeify callback
  
  <span class="hljs-attribute">createVariantJSON</span>: <span class="hljs-function"><span class="hljs-params">(variant, callback)</span> -&gt;</span>
    <span class="hljs-property">@post</span> <span class="hljs-string">'/variant/add'</span>, variant
    .nodeify(callback)</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p><code>updateVariant( variant, [callback] )</code></p>
<p>Update a Product Variation</p>
<p>Arguments</p>
<ol>
<li>variant<ul>
<li>sku: The unique identifier for the variation you would like to update</li>
<li>inventory: <em>optional</em> The physical quantities you have for this variation</li>
<li>price: <em>optional</em> The price of the variation when the user purchases one</li>
<li>shipping: <em>optional</em> The shipping of the variation when the user purchases one</li>
<li>enabled: <em>optional</em> True if the variation is for sale, False if you need to halt sales.</li>
<li>size: <em>optional</em> The size of the variation. Example: Large, Medium, Small, 5, 6, 7.5</li>
<li>color: <em>optional</em> The color of the variation. Example: red, blue, green</li>
<li>msrp: <em>optional</em> Manufacturer’s Suggested Retail Price.</li>
<li>shipping_time: <em>optional</em> The amount of time it takes for the shipment to reach the buyer. Please also factor in the time it will take to fulfill and ship the item. Provide a time range in number of days. Lower bound cannot be less than 2 days. Example: 5-10</li>
<li>main_image: <em>optional</em> URL of a photo for this variant. Provide this when you have different pictures for different variant of the product. If left out, it’ll use the main_image of the productwith the provided parent_sku. Link directly to the image, not the page where it is located. We accept JPEG, PNG or GIF format. Images should be at least 100 x 100 pixels in size.</li>
</ul>
</li>
<li>callback: err, {}</li>
</ol>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">updateVariant</span>: <span class="hljs-function"><span class="hljs-params">(variant, callback)</span> -&gt;</span>
    <span class="hljs-property">@updateVariantJSON</span> variant
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">(json)</span> =&gt;</span> json.data
      .nodeify callback
  
  <span class="hljs-attribute">updateVariantJSON</span>: <span class="hljs-function"><span class="hljs-params">(variant, callback)</span> -&gt;</span>
    <span class="hljs-property">@post</span> <span class="hljs-string">'/variant/update'</span>, variant
    .nodeify(callback)</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p><code>enableVariant( sku, [callback] )</code></p>
<p>Enable a Product Variation</p>
<p>Arguments</p>
<ol>
<li>sku: The unique identifier for the item you would like to update</li>
<li>callback: err, {}</li>
</ol>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">enableVariant</span>: <span class="hljs-function"><span class="hljs-params">(sku, callback)</span> -&gt;</span>
    <span class="hljs-property">@enableVariantJSON</span> sku
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">(json)</span> =&gt;</span> json.data
      .nodeify callback
  
  <span class="hljs-attribute">enableVariantJSON</span>: <span class="hljs-function"><span class="hljs-params">(sku, callback)</span> -&gt;</span>
    <span class="hljs-property">@post</span> <span class="hljs-string">'/variant/enable'</span>, <span class="hljs-attribute">sku</span>: sku
    .nodeify(callback)</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p><code>disableVariant( sku, [callback] )</code></p>
<p>Disable a Product Variation</p>
<p>Arguments same as <code>enableVariant</code></p>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">disableVariant</span>: <span class="hljs-function"><span class="hljs-params">(sku, callback)</span> -&gt;</span>
    <span class="hljs-property">@disableVariantJSON</span> sku
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">(json)</span> =&gt;</span> json.data
      .nodeify callback
  
  <span class="hljs-attribute">disableVariantJSON</span>: <span class="hljs-function"><span class="hljs-params">(sku, callback)</span> -&gt;</span>
    <span class="hljs-property">@post</span> <span class="hljs-string">'/variant/disable'</span>, <span class="hljs-attribute">sku</span>: sku
    .nodeify(callback)</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <h2 id="order">Order</h2>

            </div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p><code>order( id, [callback] )</code></p>
<p>Retrieves the details of an existing order.</p>
<p>Arguments</p>
<ol>
<li>id</li>
<li>callback: err, order</li>
</ol>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">order</span>: <span class="hljs-function"><span class="hljs-params">(id, callback)</span> -&gt;</span>
    <span class="hljs-property">@orderJSON</span> id
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">(json)</span> =&gt;</span> <span class="hljs-property">@format</span> json.data
      .nodeify callback
      
  <span class="hljs-attribute">orderJSON</span>: <span class="hljs-function"><span class="hljs-params">(id, callback)</span> -&gt;</span>
    <span class="hljs-property">@get</span> <span class="hljs-string">'/order'</span>, <span class="hljs-attribute">id</span>: id
      .nodeify callback</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p><code>orders( [start], [limit], [since], [callback] )</code></p>
<p>Retrieve Recently Changed Orders</p>
<p>Arguments</p>
<ol>
<li>start: <em>optional</em> An offset into the list of returned items. Use 0 to start at the beginning. The API will return the requested number of items starting at this offset. Default to 0 if not supplied</li>
<li>limit: <em>optional</em> A limit on the number of products that can be returned. Limit can range from 1 to 500 items and the default is 50</li>
<li>since: <em>optional</em> Collect all the orders that have been updated since the time value passed into this parameter. Fetches from beginning of time if not specified. We accept 2 formats, one with precision down to day and one with precision down to seconds. Example: <code>Jan 20th, 2014</code> is <code>2014-01-20</code>, <code>Jan 20th, 2014 20:10:20</code> is <code>2014-01-20T20:10:20</code>.</li>
<li>callback: err, orders.</li>
</ol>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">orders</span>: <span class="hljs-function"><span class="hljs-params">(start, limit, since, callback)</span> -&gt;</span>
    <span class="hljs-property">@ordersJSON</span> start, limit, since
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">(json)</span> =&gt;</span> <span class="hljs-property">@format</span> json.data
      .nodeify callback
      
  <span class="hljs-attribute">ordersJSON</span>: <span class="hljs-function"><span class="hljs-params">(start = <span class="hljs-number">0</span>, limit = <span class="hljs-number">50</span>, since = <span class="hljs-string">''</span>, callback)</span> -&gt;</span>
    <span class="hljs-property">@get</span> <span class="hljs-string">'/order/multi-get'</span>,
      <span class="hljs-attribute">start</span>: start
      <span class="hljs-attribute">limit</span>: limit
      <span class="hljs-attribute">since</span>: since
    .nodeify callback</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p><code>unfullfiledOrders( [start], [limit], [since], [callback] )</code></p>
<p>Retrieve Unfulfilled Orders</p>
<p>Arguments same as <code>orders</code></p>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">unfullfiledOrders</span>: <span class="hljs-function"><span class="hljs-params">(start, limit, since, callback)</span> -&gt;</span>
    <span class="hljs-property">@unfullfiledOrdersJSON</span> start, limit, since
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">(json)</span> =&gt;</span> <span class="hljs-property">@format</span> json.data
      .nodeify callback
      
  <span class="hljs-attribute">unfullfiledOrdersJSON</span>: <span class="hljs-function"><span class="hljs-params">(start = <span class="hljs-number">0</span>, limit = <span class="hljs-number">50</span>, since = <span class="hljs-string">''</span>, callback)</span> -&gt;</span>
    <span class="hljs-property">@get</span> <span class="hljs-string">'/order/get-fulfill'</span>,
      <span class="hljs-attribute">start</span>: start
      <span class="hljs-attribute">limit</span>: limit
      <span class="hljs-attribute">since</span>: since
    .nodeify callback</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p><code>fulfillOrder( order, [callback] )</code></p>
<p>Fulfill an order</p>
<p>Arguments</p>
<ol>
<li>order<ul>
<li>id: Wish’s unique identifier for the order, or ‘order_id’ in the Order object</li>
<li>tracking_provider: The carrier that will be shipping your package to its destination</li>
<li>tracking_number: <em>optional</em> The unique identifier that your carrier provided so that the user can track their package as it is being delivered. Tracking number should only contain alphanumeric characters with no space between them.</li>
<li>ship_note: <em>optional</em> A note to the user when you marked the order as shipped</li>
</ul>
</li>
<li>callback: err, { success: true }</li>
</ol>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">fulfillOrder</span>: <span class="hljs-function"><span class="hljs-params">(order, callback)</span> -&gt;</span>
    <span class="hljs-property">@fulfillOrderJSON</span> order
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">(json)</span> =&gt;</span> <span class="hljs-property">@format</span> json.data
      .nodeify callback
  
  <span class="hljs-attribute">fulfillOrderJSON</span>: <span class="hljs-function"><span class="hljs-params">(order, callback)</span> -&gt;</span>
    <span class="hljs-property">@post</span> <span class="hljs-string">'/order/fulfill-one'</span>, order
    .nodeify(callback)</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p><code>refundOrder( args, [callback] )</code></p>
<p>Refund/Cancel an order</p>
<p>Arguments</p>
<ol>
<li>object<ul>
<li>id: Wish’s unique identifier for the order, or ‘order_id’ in the Order object</li>
<li>reason_code: An integer representing the reason for the refund. Check the table between for accepted reason codes<ul>
<li>0 No More Inventory</li>
<li>1 Unable to Ship</li>
<li>2 Customer Requested Refund</li>
<li>3 Item Damaged</li>
<li>7 Received Wrong Item</li>
<li>8 Item does not Fit</li>
<li>9 Arrived Late or Missing</li>
<li>-1 Other, if none of the reasons above apply. reason_note is required if this is used asreason_code</li>
</ul>
</li>
<li>reason_note: <em>optional</em> A note to the user explaining reason for the refund. This field is required if reason_code is -1(Other)</li>
</ul>
</li>
<li>callback: err, { success: true }</li>
</ol>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">refundOrder</span>: <span class="hljs-function"><span class="hljs-params">(args, callback)</span> -&gt;</span>
    <span class="hljs-property">@refundOrderJSON</span> args
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">(json)</span> =&gt;</span> <span class="hljs-property">@format</span> json.data
      .nodeify callback
  
  <span class="hljs-attribute">cancelOrder</span>: <span class="hljs-function"><span class="hljs-params">(args, callback)</span> -&gt;</span>
    <span class="hljs-property">@refundOrder</span> args, callback
  
  <span class="hljs-attribute">refundOrderJSON</span>: <span class="hljs-function"><span class="hljs-params">(args, callback)</span> -&gt;</span>
    <span class="hljs-property">@post</span> <span class="hljs-string">'/order/refund'</span>, args
    .nodeify(callback)</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p><code>modifyOrder( args, [callback] )</code></p>
<p>Modify Tracking of a Shipped Order</p>
<p>Arguments</p>
<ol>
<li>object<ul>
<li>id: Wish’s unique identifier for the order, or ‘order_id’ in the Order object</li>
<li>tracking_provider: The carrier that will be shipping your package to its destination</li>
<li>tracking_number: <em>optional</em> The unique identifier that your carrier provided so that the user can track their package as it is being delivered. Tracking number should only contain alphanumeric characters with no space between them.</li>
<li>ship_note: <em>optional</em> A note to the user when you marked the order as shipped</li>
</ul>
</li>
<li>callback: err, { success: true }</li>
</ol>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">modifyOrder</span>: <span class="hljs-function"><span class="hljs-params">(args, callback)</span> -&gt;</span>
    <span class="hljs-property">@modifyOrderJSON</span> args
      .<span class="hljs-keyword">then</span> <span class="hljs-function"><span class="hljs-params">(json)</span> =&gt;</span> <span class="hljs-property">@format</span> json.data
      .nodeify callback
  
  <span class="hljs-attribute">modifyOrderJSON</span>: <span class="hljs-function"><span class="hljs-params">(args, callback)</span> -&gt;</span>
    <span class="hljs-property">@post</span> <span class="hljs-string">'/order/modify-tracking'</span>, args
    .nodeify(callback)</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
